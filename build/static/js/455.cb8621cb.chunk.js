"use strict";(self.webpackChunkthetower=self.webpackChunkthetower||[]).push([[455],{53016:(e,s,t)=>{t.d(s,{Z:()=>n});t(72791);var a=t(2409),r=t(49389),d=t(80184);const n=e=>{let{label:s,name:t,required:n,required_text:l,warning:i}=e;return(0,d.jsx)(a.Z.Item,{label:i?(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:s}),(0,d.jsx)("br",{}),(0,d.jsx)("p",{children:i})]}):(0,d.jsx)("div",{children:s}),name:t,rules:[{required:n,message:l}],children:(0,d.jsx)(r.default,{})})}},96185:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(72791),r=t(2409),d=t(50419),n=t(66106),l=t(30914),i=t(49389),u=t(87309),o=t(91933),c=t(27169),m=t(94533),x=t(57689),p=t(16030),h=t(77221),j=t(53016),Z=t(80184);const b=e=>{let{label:s,name:t,required:a,required_text:d}=e;return(0,Z.jsx)(r.Z.Item,{label:s,name:t,rules:[{required:a,message:d},{validator:(e,s,t)=>{!s||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?t():t("Please enter a valid email address")}}],children:(0,Z.jsx)(i.default,{})})},f={title_ru:"",title_uz:"",title_en:"",address_ru:"",address_uz:"",address_en:"",phone:"",email:"",map:"",instagram:"",facebook:"",youtube:""},g=()=>{const[e]=r.Z.useForm(),s=(0,x.s0)(),{editId:t}=(0,p.v9)((e=>e.editData)),g=(0,p.I0)(),{mutate:_,data:q,isLoading:y,isSuccess:k}=(0,o.useMutation)((e=>{let{url:s,data:t}=e;return c.Z.postData(s,t)}),{onSuccess:()=>{d.ZP.success("Success")},onError:e=>{for(let s in e.response.data)d.ZP.error("".concat(s,": ").concat(e.response.data[s][0]))}}),{isLoading:I,data:v,refetch:F,isSuccess:S}=(0,o.useQuery)(["edit-contact",t],(()=>c.Z.getDataByID("/pages/contact",t)),{enabled:!1}),{mutate:E,isLoading:w,data:z,isSuccess:V}=(0,o.useMutation)((e=>{let{url:s,data:t,id:a}=e;return c.Z.editData(s,t,a)}),{onSuccess:()=>{d.ZP.success("Success")},onError:e=>{for(let s in e.response.data)d.ZP.error("".concat(s,": ").concat(e.response.data[s]))}});(0,a.useEffect)((()=>{V&&g({type:h.Pb,payload:""}),(k||V)&&s("/contact")}),[q,z]),(0,a.useEffect)((()=>{""!==t&&F()}),[t]),(0,a.useEffect)((()=>{""===t&&e.setFieldsValue(f)}),[]),(0,a.useEffect)((()=>{if(S){const s={title_ru:v.title_ru,title_uz:v.title_uz,title_en:v.title_en,address_uz:v.address_uz,address_ru:v.address_ru,address_en:v.address_en,phone:v.phone,email:v.email,map:v.map,facebook:v.facebook.split("//")[1],instagram:v.instagram.split("//")[1],youtube:v.youtube.split("//")[1]};e.setFieldsValue(s)}}),[v]);return(0,a.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("myFormValues"));s&&(s.images=[],e.setFieldsValue(s));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,Z.jsx)("div",{children:y||I||w?(0,Z.jsx)(m.QP,{}):(0,Z.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:f,onFinish:e=>{const s={...e,facebook:"https://".concat(e.facebook),instagram:"https://".concat(e.instagram),youtube:"https://".concat(e.youtube)};v?E({url:"/pages/contact",data:s,id:t}):_({url:"/pages/contact/",data:s})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(n.Z,{gutter:20,children:[(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"Title Ru",name:"title_ru"})}),(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"Sarlavha kiritish kerak",label:"Title Uz",name:"title_uz"})}),(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"A title must be entered",label:"Title En",name:"title_en"})})]}),(0,Z.jsxs)(n.Z,{gutter:20,children:[(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0430\u0434\u0440\u0435\u0441",label:"\u0410\u0434\u0440\u0435\u0441 Ru",name:"address_ru"})}),(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"Address kiritish kerak",label:"Address Uz",name:"address_uz"})}),(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"You must enter an address",label:"Address En",name:"address_en"})})]}),(0,Z.jsxs)(n.Z,{gutter:20,children:[(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone"})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(b,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email"})})]}),(0,Z.jsx)(n.Z,{gutter:20,children:(0,Z.jsx)(l.Z,{span:24,children:(0,Z.jsx)(j.Z,{required:!0,required_text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",name:"map"})})}),(0,Z.jsxs)(n.Z,{gutter:20,children:[(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(r.Z.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Facebook"}],children:(0,Z.jsx)(i.default,{addonBefore:"https://"})})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(r.Z.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Instagram"}],children:(0,Z.jsx)(i.default,{addonBefore:"https://"})})})]}),(0,Z.jsx)(n.Z,{gutter:20,children:(0,Z.jsx)(l.Z,{span:24,children:(0,Z.jsx)(r.Z.Item,{label:"Youtube",name:"youtube",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u042e\u0442\u0443\u0431"}],children:(0,Z.jsx)(i.default,{addonBefore:"https://"})})})}),(0,Z.jsx)(u.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:S?"Edit":"Add"})]})})}},30914:(e,s,t)=>{t.d(s,{Z:()=>a});const a=t(89752).Z}}]);
//# sourceMappingURL=455.cb8621cb.chunk.js.map