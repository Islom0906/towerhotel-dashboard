"use strict";(self.webpackChunkthetower=self.webpackChunkthetower||[]).push([[614],{50614:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(72791),l=n(50419),c=n(83099),r=n(66106),o=n(30914),s=n(83734),i=n(37083),d=n(27169),u=n(91933),p=n(2409),f=n(47528),h=n(87309),m=n(82862),x=n(92883),b=n(31752),v=n(7866),Z=n(80184);const j={title_uz:"",title_ru:"",sub_category:[]},y=e=>{let{data:t,refetch:n}=e;const[i]=p.Z.useForm(),[y,g]=(0,a.useState)(!1),[C,E]=(0,a.useState)(null),{mutate:w,data:O,isLoading:P,isSuccess:k}=(0,u.useMutation)((e=>{let{url:t,data:n,id:a}=e;return d.Z.editDataPatch(t,n,a)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let t in e.response.data)l.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),S=e=>{w({url:"/pages/feedback",data:e,id:C})};(0,a.useEffect)((()=>{k&&(g(!1),i.setFieldsValue(j),n())}),[O]);const N=(0,a.useMemo)((()=>[{value:"APPROVED",label:"Approved"},{value:"REJECTED",label:"Rejected"}]),[]),R=[{title:"Customer's full name",dataIndex:"fullname",id:"fullname",render:e=>(0,Z.jsx)("p",{children:e})},{title:"Title",dataIndex:"title",id:"title",render:e=>(0,Z.jsx)("p",{children:e})},{title:"Customer's country",dataIndex:"country",id:"country",render:e=>(0,Z.jsx)("p",{children:e})},{title:"Customer's phone",dataIndex:"phone",id:"phone",render:e=>(0,Z.jsx)(f.Z,{children:e})},{title:"Status",dataIndex:"status",id:"status",render:e=>(0,Z.jsx)(f.Z,{color:"NEW"===e?"#108ee9":"APPROVED"===e?"#87d068":"#f50",children:e})},{title:"Action",id:"action",render:(e,t)=>(0,Z.jsx)(c.Z,{size:20,children:(0,Z.jsx)(h.Z,{onClick:()=>{return e=t.id,g(!0),void E(e);var e},type:"primary",icon:(0,Z.jsx)(b.Z,{}),children:"Edit Status"})})}];return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(m.Z,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441",open:y,onOk:()=>{i.validateFields().then((e=>{S(e)})).catch((e=>{console.log("Failed:",e)}))},onCancel:()=>{g(!1)},children:P?(0,Z.jsx)(v.QP,{}):(0,Z.jsx)(p.Z,{form:i,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:S,autoComplete:"off",children:(0,Z.jsx)(r.Z,{gutter:20,children:(0,Z.jsx)(o.Z,{span:24,children:(0,Z.jsx)(p.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441",name:"status",rules:[{required:!0,message:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(s.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0441\u0442\u0430\u0442\u0443\u0441",optionLabelProp:"label",options:N})})})})})}),(0,Z.jsx)(x.Z,{columns:R,expandable:{expandedRowRender:e=>(0,Z.jsx)("p",{style:{margin:10},children:e.description})},dataSource:t,rowKey:e=>e.id})]})},g=()=>{const[e,t]=(0,a.useState)(""),{data:n,isLoading:p,refetch:f}=(0,u.useQuery)("feedback-get",(()=>d.Z.getData("/pages/feedback/".concat(e?"?status=".concat(e):""))),{onError:e=>{l.ZP.error(e)}});(0,a.useEffect)((()=>{f()}),[e]);const h=(0,a.useMemo)((()=>[{value:"",label:"All"},{value:"NEW",label:"New"},{value:"APPROVED",label:"Approved"},{value:"REJECTED",label:"Rejected"}]),[]);return(0,Z.jsx)("div",{className:"site-space-compact-wrapper",children:(0,Z.jsxs)(c.Z,{direction:"vertical",style:{width:"100%"},children:[(0,Z.jsx)(r.Z,{gutter:20,children:(0,Z.jsx)(o.Z,{offset:16,span:8,children:(0,Z.jsx)(s.default,{style:{width:"100%"},placeholder:"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443",optionLabelProp:"label",onChange:e=>{t(e)},options:h})})}),(0,Z.jsx)(i.Z,{size:"medium",spinning:p,children:(0,Z.jsx)(y,{data:n,refetch:f})})]})})}},31752:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(1413),l=n(72791);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var r=n(54291),o=function(e,t){return l.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:c}))};o.displayName="EditOutlined";const s=l.forwardRef(o)},47528:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(4942),l=n(87462),c=n(29439),r=n(60732),o=n(81694),s=n.n(o),i=n(41818),d=n(72791),u=n(71929),p=n(54466),f=n(12833),h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n};const m=function(e){var t=e.prefixCls,n=e.className,c=e.checked,r=e.onChange,o=e.onClick,i=h(e,["prefixCls","className","checked","onChange","onClick"]),p=(0,d.useContext(u.E_).getPrefixCls)("tag",t),f=s()(p,(0,a.Z)((0,a.Z)({},"".concat(p,"-checkable"),!0),"".concat(p,"-checkable-checked"),c),n);return d.createElement("span",(0,l.Z)({},i,{className:f,onClick:function(e){null===r||void 0===r||r(!c),null===o||void 0===o||o(e)}}))};var x=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},b=new RegExp("^(".concat(p.Y.join("|"),")(-inverse)?$")),v=new RegExp("^(".concat(p.E.join("|"),")$")),Z=function(e,t){var n=e.prefixCls,o=e.className,p=e.style,h=e.children,m=e.icon,Z=e.color,j=e.onClose,y=e.closeIcon,g=e.closable,C=void 0!==g&&g,E=x(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),w=d.useContext(u.E_),O=w.getPrefixCls,P=w.direction,k=d.useState(!0),S=(0,c.Z)(k,2),N=S[0],R=S[1];d.useEffect((function(){"visible"in E&&R(E.visible)}),[E.visible]);var I=function(){return!!Z&&(b.test(Z)||v.test(Z))},L=(0,l.Z)({backgroundColor:Z&&!I()?Z:void 0},p),A=I(),D=O("tag",n),z=s()(D,(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(D,"-").concat(Z),A),"".concat(D,"-has-color"),Z&&!A),"".concat(D,"-hidden"),!N),"".concat(D,"-rtl"),"rtl"===P),o),F=function(e){e.stopPropagation(),null===j||void 0===j||j(e),e.defaultPrevented||"visible"in E||R(!1)},M="onClick"in E||h&&"a"===h.type,V=(0,i.Z)(E,["visible"]),_=m||null,T=_?d.createElement(d.Fragment,null,_,d.createElement("span",null,h)):h,W=d.createElement("span",(0,l.Z)({},V,{ref:t,className:z,style:L}),T,C?y?d.createElement("span",{className:"".concat(D,"-close-icon"),onClick:F},y):d.createElement(r.Z,{className:"".concat(D,"-close-icon"),onClick:F}):null);return M?d.createElement(f.Z,null,W):W},j=d.forwardRef(Z);j.CheckableTag=m;const y=j}}]);
//# sourceMappingURL=614.c13cc5e3.chunk.js.map